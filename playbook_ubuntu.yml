- name: Configure Ubuntu system
  hosts: ubuntu
  remote_user: "{{ ansible_user_id }}"
  become: false
  gather_facts: false
  pre_tasks:
    - name: Bootstrap Python (for Docker/minimal installs)
      ansible.builtin.raw: |
        which python3 || (apt-get update && apt-get install -y python3)
      become: true
      changed_when: false
    - name: Gather facts after Python installed
      ansible.builtin.setup:
  roles:
    # Distro-specific
    - common_ubuntu
    - devtools_ubuntu
    - regolith_ubuntu
    # Shared
    - gitconfig
    - nvm
    - omz
    # - v2raya_ubuntu
